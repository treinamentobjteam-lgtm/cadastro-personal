<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BJ TEAM - TREINAMENTO</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
  * { margin:0; padding:0; box-sizing:border-box; }
  body {
    font-family:'Poppins',sans-serif;
    min-height:100vh;
    display:flex;
    justify-content:center;
    align-items:center;
    padding:20px;
    background:url('IMAGEM BJ.png') no-repeat center center fixed;
    background-size:cover;
    position:relative;
    color:#fff;
  }
  body::before {
    content:"";
    position:absolute;
    top:0; left:0; right:0; bottom:0;
    background: rgba(0,0,0,0.6);
    z-index:0;
  }
  .container {
    position:relative;
    z-index:1;
    background:#1c1c1cdd;
    padding:35px;
    border-radius:20px;
    max-width:450px;
    width:100%;
    box-shadow:0 8px 20px rgba(0,0,0,0.8);
    border-top:4px solid #FFD700;
    border-bottom:4px solid #FFD700;
  }
  h2 {
    text-align:center;
    font-size:28px;
    margin-bottom:25px;
    background: linear-gradient(90deg, #FFD700, #FFC107, #FFD700);
    background-size:200%;
    -webkit-background-clip:text;
    -webkit-text-fill-color:transparent;
    animation: gradient 3s linear infinite;
    font-weight:700;
  }
  @keyframes gradient {0%{background-position:0% 50%;}50%{background-position:100% 50%;}100%{background-position:0% 50%;}}
  label {display:block; font-weight:600; margin-top:15px; color:#fff;}
  .input-group {position:relative;}
  .input-group i {position:absolute; left:12px; top:50%; transform:translateY(-50%); color:#FFD700;}
  input, select {
    width:100%;
    padding:12px 12px 12px 35px;
    margin-top:5px;
    border:2px solid #FFD700;
    border-radius:10px;
    font-size:16px;
    outline:none;
    background:#222;
    color:#fff;
  }
  input:focus, select:focus {border-color:#fff;}
  button {
    width:100%;
    padding:14px;
    margin-top:25px;
    border:none;
    border-radius:12px;
    background:linear-gradient(90deg, #FFD700, #FFC107);
    color:#000;
    font-size:18px;
    font-weight:700;
    cursor:pointer;
    transition: all 0.3s ease;
    box-shadow:0 4px 10px rgba(0,0,0,0.5);
  }
  button:hover {background:linear-gradient(90deg, #FFC107, #FFD700); transform:scale(1.03);}
  @media (max-width:500px){.container{padding:25px;} h2{font-size:24px;} button{font-size:16px;}}
</style>
</head>
<body>
<div class="container">
  <h2>BJ TEAM - CADASTRO</h2>
  <form id="cadastroForm" onsubmit="enviado(); return false;">
    <label for="nome">Nome:</label>
    <div class="input-group">
      <i class="fas fa-user"></i>
      <input type="text" name="nome" id="nome" required>
    </div>

    <label for="idade">Idade:</label>
    <div class="input-group">
      <i class="fas fa-birthday-cake"></i>
      <input type="text" name="idade" id="idade" required>
    </div>

    <label for="telefone">Telefone:</label>
    <div class="input-group">
      <i class="fas fa-phone"></i>
      <input type="tel" name="telefone" id="telefone" required>
    </div>

    <label for="email">E-mail:</label>
    <div class="input-group">
      <i class="fas fa-envelope"></i>
      <input type="email" name="email" id="email" required>
    </div>

    <label for="objetivo">Objetivo:</label>
    <div class="input-group">
      <i class="fas fa-dumbbell"></i>
      <select name="objetivo" id="objetivo">
        <option value="Emagrecimento">Emagrecimento</option>
        <option value="Hipertrofia">Hipertrofia</option>
      </select>
    </div>

    <label for="horarios">Horários disponíveis:</label>
    <div class="input-group">
      <i class="fas fa-clock"></i>
      <select name="horario" id="horarios"></select>
    </div>

    <button type="submit">Enviar Cadastro</button>
  </form>
</div>

<script>
const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbygF9Z_scCxg7tSpDZne-Sh0Ia0JonY7cAF3C5mHLkSLcaxxCBgyAZ3K5kvFEX4CDhKwQ/exec";

// Função para atualizar horários diretamente da aba Horários
async function atualizarHorarios() {
  try {
    const resp = await fetch(WEB_APP_URL + "?acao=horarios");
    const horarios = await resp.json();
    const select = document.getElementById('horarios');
    select.innerHTML = '';
    horarios.forEach(h => {
      const option = document.createElement('option');
      option.value = h;
      option.textContent = h;
      select.appendChild(option);
    });
  } catch(err) {
    console.error("Erro ao carregar horários:", err);
    // Caso falhe, exibe os horários padrão
    const horariosFallback = [
      "Terça e Quinta 14:00 até 15:00",
      "Terça e Quinta 15:00 até 16:00",
      "Terça e Quinta 16:00 até 17:00",
      "Quarta e Sexta 15:00 até 16:00",
      "Quarta e Sexta 16:00 até 17:00"
    ];
    const select = document.getElementById('horarios');
    select.innerHTML = '';
    horariosFallback.forEach(h => {
      const option = document.createElement('option');
      option.value = h;
      option.textContent = h;
      select.appendChild(option);
    });
  }
}

async function enviado(){
  const data={
    nome:document.getElementById("nome").value,
    idade:document.getElementById("idade").value,
    telefone:document.getElementById("telefone").value,
    email:document.getElementById("email").value,
    objetivo:document.getElementById("objetivo").value,
    horario:document.getElementById("horarios").value
  };
  try{
    const resp = await fetch(WEB_APP_URL, {
      method:"POST",
      body:JSON.stringify(data),
      headers:{"Content-Type":"application/json"}
    });
    const result = await resp.json();
    if(result.status === "sucesso"){
      alert("Cadastro enviado com sucesso! ✅");
      document.getElementById("cadastroForm").reset();
      atualizarHorarios();
    } else {
      alert("Erro ao enviar cadastro: " + result.message);
    }
  }catch(err){
    console.error(err);
    alert("Erro ao enviar cadastro.");
  }
}

atualizarHorarios();
</script>
</body>
</html>
